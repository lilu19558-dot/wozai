<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>结果 - 我在背单词</title>
<style>
body {
  margin:0;
  font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "思源黑体", "Noto Sans SC", sans-serif;
  background:linear-gradient(135deg,#fdfdfd,#f4f4f7);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  min-height:100vh; color:#1c1c1e; text-align:center;
}
header {
  position:fixed; top:0; width:100%; height:80px; background:#ffffff;
  display:flex; align-items:center; justify-content:center; box-shadow:0 2px 10px rgba(0,0,0,0.1);
  z-index:1000; cursor:pointer;
}
header h1 {
  margin:0; font-size:28px; letter-spacing:1px; text-align:center;
}
header h1 .brand { font-weight:700; color:#007bff; }
header h1 .subtitle { font-weight:400; color:#555555; font-size:22px; margin-left:8px; }

h1#congrats { font-size:8vw; margin-top:100px; font-weight:600; }
p { font-size:4.5vw; margin:8px 0; }
.buttons {
  margin-top:30px;
  display:flex; gap:20px; flex-wrap:wrap; justify-content:center;
}
button {
  padding:3vw 6vw; font-size:4.5vw; border-radius:12px;
  border:none; background:#007aff; color:white; cursor:pointer; transition:0.3s;
}
button:hover { background:#0059c9; }

@media (min-width: 768px) {
  h1#congrats { font-size:48px; }
  p { font-size:22px; }
  button { font-size:20px; padding:12px 26px; }
}
</style>
</head>
<body>

<header>
  <h1 onclick="goHome()">
    <span class="brand">我在</span>
    <span class="subtitle">背单词 (wozai)</span>
  </h1>
</header>

<h1 id="congrats"></h1>
<p id="info"></p>
<p id="time"></p>
<p id="typingStats"></p>

<div class="buttons">
  <button onclick="nextUnit()">下一单元</button>
  <button onclick="restartUnit()">再来一次</button>
  <button onclick="goHome()">返回首页</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<script>
// 获取结果数据
const result = JSON.parse(localStorage.getItem("typingResult") || '{"time":0,"total":0,"correct":0,"wrong":0,"totalWords":0,"accuracy":100,"version":"冀教版","grade":"七年级上","unit":"Unit1"}');

// 祝贺词列表
const congratsWords = ["Congratulations!","Well done!","Great job!","Awesome!","Fantastic!"];

// 每次完成单元都随机生成祝贺词
const chosen = congratsWords[Math.floor(Math.random() * congratsWords.length)];

// 显示祝贺词和成绩
document.getElementById("congrats").textContent = chosen;
document.getElementById("info").textContent = `${result.version} | ${result.grade} | ${result.unit}`;
document.getElementById("time").textContent = `时间: ${result.time} 秒`;

const totalWords = result.totalWords || 0;
const correct = result.correct || 0;
const wrong = result.wrong || 0;
const accuracy = totalWords ? Math.round(correct / totalWords * 100) : 100;

document.getElementById("typingStats").textContent =
  `已完成: ${totalWords} / ${totalWords} | 正确: ${correct} | 错误: ${wrong} | 正确率: ${accuracy}%`;

// 语音播放祝贺词
const u = new SpeechSynthesisUtterance(chosen);
u.lang='en-US'; u.rate=1; 
speechSynthesis.speak(u);

// 彩带效果
function fireConfetti(){
  confetti({
    particleCount:200,
    spread:150,
    origin:{ x:0.5, y:0.3 },
    colors:["#007aff","#34c759","#ff2d55","#ffcc00","#5ac8fa"],
    scalar:1.2,
    ticks:200
  });
}
setTimeout(fireConfetti,200);

// 按钮操作
function goHome(){ 
  window.location.href="../index.html"; 
}

function nextUnit(){
  window.location.href="Jijiao-Grade7-Book1-Unit2.html";
}

function restartUnit(){
  window.location.href="Jijiao-Grade7-Book1-Unit1.html";
}
</script>

</body>
</html>
